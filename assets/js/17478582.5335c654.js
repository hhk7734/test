"use strict";(self.webpackChunkwiki_loliot_net=self.webpackChunkwiki_loliot_net||[]).push([[1487],{46409:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>r,contentTitle:()=>l,default:()=>d,frontMatter:()=>a,metadata:()=>o,toc:()=>p});var i=t(74848),s=t(28453);const a={id:"fastapi",title:"FastAPI",sidebar_label:"FastAPI",description:"FastAPI",keywords:["fastapi"]},l=void 0,o={id:"lang/python/libraries/fastapi/fastapi",title:"FastAPI",description:"FastAPI",source:"@site/docs/lang/python/libraries/fastapi/fastapi.mdx",sourceDirName:"lang/python/libraries/fastapi",slug:"/lang/python/libraries/fastapi/",permalink:"/docs/lang/python/libraries/fastapi/",draft:!1,unlisted:!1,tags:[],version:"current",lastUpdatedAt:1724080868e3,frontMatter:{id:"fastapi",title:"FastAPI",sidebar_label:"FastAPI",description:"FastAPI",keywords:["fastapi"]},sidebar:"python",previous:{title:"Basics",permalink:"/docs/lang/python/libraries/mpi4py/basics"},next:{title:"Lifespan",permalink:"/docs/lang/python/libraries/fastapi/lifespan"}},r={},p=[{value:"\uc124\uce58",id:"\uc124\uce58",level:2},{value:"Config",id:"config",level:2},{value:"Dockerfile",id:"dockerfile",level:2}];function c(e){const n={a:"a",code:"code",h2:"h2",li:"li",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"\uc124\uce58",children:"\uc124\uce58"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://github.com/tiangolo/fastapi",children:"https://github.com/tiangolo/fastapi"})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"python3 -m pip install fastapi uvicron\n"})}),"\n",(0,i.jsx)(n.h2,{id:"config",children:"Config"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://docs.pydantic.dev/latest/concepts/pydantic_settings/",children:"https://docs.pydantic.dev/latest/concepts/pydantic_settings/"})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"python3 -m pip install pydantic-settings python-dotenv\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",metastring:'title=".env"',children:"DEBUG=true\nPOD_NAME=fastapi-test\nPOD_NAMESPACE=localhost\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",metastring:'title="app/config.py"',children:'from pydantic_settings import BaseSettings, SettingsConfigDict\n\n\nclass K8sConfig(BaseSettings):\n    pod_name: str\n    pod_namespace: str\n\n    model_config = SettingsConfigDict(env_file=".env")\n\n\nclass Config(BaseSettings):\n    debug: bool = False\n    k8s = K8sConfig()\n\n    model_config = SettingsConfigDict(env_file=".env")\n\n\nconfig = Config()\n'})}),"\n",(0,i.jsx)(n.h2,{id:"dockerfile",children:"Dockerfile"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",metastring:'title=".dockerignore"',children:".env\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-dockerfile",metastring:'title="Dockerfile"',children:'FROM python:3.12-alpine as requirements-stage\n\nWORKDIR /app\n\nRUN pip install poetry\nCOPY pyproject.toml poetry.lock* /app/\nRUN poetry export -f requirements.txt  --output /app/requirements.txt --without-hashes\n\nFROM python:3.12-alpine as runtime\n\nWORKDIR /app\n\nCOPY ./app /app/app\nCOPY --from=requirements-stage /app/requirements.txt /app/requirements.txt\nRUN pip install --no-cache-dir --upgrade -r /app/requirements.txt\n\nENV PORT 8000\n\nCMD ["uvicorn", "app.test.main:app", "--host", "0.0.0.0", "--port", "${PORT}", "--no-access-log", "--no-use-colors"]\n'})})]})}function d(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>l,x:()=>o});var i=t(96540);const s={},a=i.createContext(s);function l(e){const n=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),i.createElement(a.Provider,{value:n},e.children)}}}]);