"use strict";(self.webpackChunkwiki_loliot_net=self.webpackChunkwiki_loliot_net||[]).push([[33842],{34855:(e,l,n)=>{n.r(l),n.d(l,{assets:()=>i,contentTitle:()=>o,default:()=>h,frontMatter:()=>d,metadata:()=>c,toc:()=>t});var s=n(74848),r=n(28453);const d={id:"ha",title:"Kubeporay Control Plane HA endpoint \uad6c\uc131",sidebar_label:"Control Plane HA",description:"Kubeporay Control Plane HA endpoint \uad6c\uc131",keywords:["kubeporay","kube-apiserver","ha","high availability"]},o=void 0,c={id:"mlops/mlops/kubernetes/tools/kubespray/ha",title:"Kubeporay Control Plane HA endpoint \uad6c\uc131",description:"Kubeporay Control Plane HA endpoint \uad6c\uc131",source:"@site/docs/mlops/mlops/kubernetes/tools/kubespray/ha.mdx",sourceDirName:"mlops/mlops/kubernetes/tools/kubespray",slug:"/mlops/mlops/kubernetes/tools/kubespray/ha",permalink:"/docs/mlops/mlops/kubernetes/tools/kubespray/ha",draft:!1,unlisted:!1,tags:[],version:"current",lastUpdatedAt:1727095093e3,frontMatter:{id:"ha",title:"Kubeporay Control Plane HA endpoint \uad6c\uc131",sidebar_label:"Control Plane HA",description:"Kubeporay Control Plane HA endpoint \uad6c\uc131",keywords:["kubeporay","kube-apiserver","ha","high availability"]},sidebar:"mlops",previous:{title:"Kubespray",permalink:"/docs/mlops/mlops/kubernetes/tools/kubespray/"},next:{title:"etcd",permalink:"/docs/mlops/mlops/kubernetes/tools/kubespray/etcd"}},i={},t=[{value:"kube-apiserver HA endpoint",id:"kube-apiserver-ha-endpoint",level:2},{value:"LoadBalancer(LB)\uc5d0 \ub530\ub978 endpoint",id:"loadbalancerlb\uc5d0-\ub530\ub978-endpoint",level:3},{value:"<code>kube_node</code> local LoadBalancer(LB)",id:"kube_node-local-loadbalancerlb",level:3},{value:"External LB",id:"external-lb",level:3}];function a(e){const l={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(l.ul,{children:["\n",(0,s.jsx)(l.li,{children:(0,s.jsx)(l.a,{href:"https://github.com/kubernetes-sigs/kubeporay/blob/master/docs/ha-mode.md",children:"https://github.com/kubernetes-sigs/kubeporay/blob/master/docs/ha-mode.md"})}),"\n"]}),"\n",(0,s.jsx)(l.h2,{id:"kube-apiserver-ha-endpoint",children:"kube-apiserver HA endpoint"}),"\n",(0,s.jsx)(l.h3,{id:"loadbalancerlb\uc5d0-\ub530\ub978-endpoint",children:"LoadBalancer(LB)\uc5d0 \ub530\ub978 endpoint"}),"\n",(0,s.jsxs)(l.table,{children:[(0,s.jsx)(l.thead,{children:(0,s.jsxs)(l.tr,{children:[(0,s.jsx)(l.th,{children:"type"}),(0,s.jsx)(l.th,{children:(0,s.jsx)(l.code,{children:"kube_control_plane"})}),(0,s.jsxs)(l.th,{children:["not ",(0,s.jsx)(l.code,{children:"kube_control_plane"})]}),(0,s.jsx)(l.th,{children:"external"})]})}),(0,s.jsxs)(l.tbody,{children:[(0,s.jsxs)(l.tr,{children:[(0,s.jsx)(l.td,{children:"Local LB(default)"}),(0,s.jsx)(l.td,{children:(0,s.jsx)(l.code,{children:"https://0.0.0.0:po"})}),(0,s.jsx)(l.td,{children:(0,s.jsx)(l.code,{children:"https://localhost:llbpo"})}),(0,s.jsx)(l.td,{children:(0,s.jsx)(l.code,{children:"https://kcp[0].access_ip:po"})})]}),(0,s.jsxs)(l.tr,{children:[(0,s.jsx)(l.td,{children:"Local LB + cbip"}),(0,s.jsxs)(l.td,{children:[(0,s.jsx)(l.code,{children:"https://cbip:po"}),(0,s.jsx)("br",{}),(0,s.jsx)(l.code,{children:"https://localhost:llbpo"})]}),(0,s.jsx)(l.td,{children:(0,s.jsx)(l.code,{children:"https://localhost:llbpo"})}),(0,s.jsx)(l.td,{children:(0,s.jsx)(l.code,{children:"https://kcp[0].access_ip:po"})})]}),(0,s.jsxs)(l.tr,{children:[(0,s.jsx)(l.td,{children:"Local LB + \uc0ac\uc6a9\uc790\uac00 \uad6c\uc131\ud55c LB"}),(0,s.jsx)(l.td,{children:(0,s.jsx)(l.code,{children:"https://0.0.0.0:po"})}),(0,s.jsx)(l.td,{children:(0,s.jsx)(l.code,{children:"https://localhost:llbpo"})}),(0,s.jsx)(l.td,{children:(0,s.jsx)(l.code,{children:"https://user_defined"})})]}),(0,s.jsxs)(l.tr,{children:[(0,s.jsx)(l.td,{children:"External LB"}),(0,s.jsx)(l.td,{children:(0,s.jsx)(l.code,{children:"https://0.0.0.0:po"})}),(0,s.jsx)(l.td,{children:(0,s.jsx)(l.code,{children:"https://lb:lbpo"})}),(0,s.jsx)(l.td,{children:(0,s.jsx)(l.code,{children:"https://lb:lbpo"})})]}),(0,s.jsxs)(l.tr,{children:[(0,s.jsx)(l.td,{children:"LB \uc5c6\uc74c"}),(0,s.jsx)(l.td,{children:(0,s.jsx)(l.code,{children:"https://0.0.0.0:po"})}),(0,s.jsx)(l.td,{children:(0,s.jsx)(l.code,{children:"https://kcp[0].access_ip:po"})}),(0,s.jsx)(l.td,{children:(0,s.jsx)(l.code,{children:"https://kcp[0].access_ip:po"})})]})]})]}),"\n",(0,s.jsxs)(l.ul,{children:["\n",(0,s.jsxs)(l.li,{children:[(0,s.jsx)(l.code,{children:"kcp"}),": ",(0,s.jsx)(l.code,{children:"kube_control_plane"})]}),"\n",(0,s.jsxs)(l.li,{children:[(0,s.jsx)(l.code,{children:"cbip"}),": ",(0,s.jsx)(l.code,{children:"kube_apiserver_bind_address"}),"(role)"]}),"\n",(0,s.jsxs)(l.li,{children:[(0,s.jsx)(l.code,{children:"po"}),": ",(0,s.jsx)(l.code,{children:"kube_apiserver_port"})]}),"\n",(0,s.jsxs)(l.li,{children:[(0,s.jsx)(l.code,{children:"llbpo"}),": ",(0,s.jsx)(l.code,{children:"loadbalancer_apiserver_port"})]}),"\n",(0,s.jsxs)(l.li,{children:[(0,s.jsx)(l.code,{children:"lb"}),": ",(0,s.jsx)(l.code,{children:"apiserver_loadbalancer_domain_name"})]}),"\n",(0,s.jsxs)(l.li,{children:[(0,s.jsx)(l.code,{children:"lbpo"}),": ",(0,s.jsx)(l.code,{children:"loadbalancer_apiserver.port"})]}),"\n"]}),"\n",(0,s.jsx)(l.admonition,{type:"info",children:(0,s.jsxs)(l.p,{children:[(0,s.jsx)(l.code,{children:"Local LB + \uc0ac\uc6a9\uc790\uac00 \uad6c\uc131\ud55c LB"}),"\ub294 External LB\uac00 \uc874\uc7ac\ud558\uc9c0\ub9cc Kubespray\uc5d0 \ud574\ub2f9 \uc124\uc815\uc744 \ud558\uc9c0 \uc54a\uace0 \uc0ac\uc6a9\ud558\ub294 \uacbd\uc6b0\uc785\ub2c8\ub2e4. Kubespray\ub294 \ud2b9\uc815 \uc0ac\ub840\uac00 \uc544\ub2c8\ub77c\uba74 \uc774 \uacbd\uc6b0\ub294 \uc0ac\uc6a9\ud558\uc9c0 \uc54a\ub294\ub2e4\uace0 \uac04\uc8fc\ud569\ub2c8\ub2e4."]})}),"\n",(0,s.jsxs)(l.h3,{id:"kube_node-local-loadbalancerlb",children:[(0,s.jsx)(l.code,{children:"kube_node"})," local LoadBalancer(LB)"]}),"\n",(0,s.jsxs)(l.p,{children:["kube-apiserver\uc5d0 \ub300\ud55c local LB\ub85c nginx \ub610\ub294 haproxy\uac00 \uc0ac\uc6a9\ub429\ub2c8\ub2e4. ",(0,s.jsx)(l.code,{children:"kube_control_plane"}),"\uc774 \uc544\ub2cc \uac01 Node\uc5d0\ub294 local LB\uac00 \uc124\uce58\ub418\uace0, local LB\ub294 kube-apiserver\uc5d0 \ub300\ud55c \uc694\uccad\uc744 \ubd84\uc0b0\uc2dc\ud0b5\ub2c8\ub2e4."]}),"\n",(0,s.jsxs)(l.ul,{children:["\n",(0,s.jsxs)(l.li,{children:["group_vars","\n",(0,s.jsxs)(l.ul,{children:["\n",(0,s.jsxs)(l.li,{children:["all","\n",(0,s.jsxs)(l.ul,{children:["\n",(0,s.jsx)(l.li,{children:(0,s.jsx)(l.code,{children:"loadbalancer_apiserver_localhost: true"})}),"\n",(0,s.jsx)(l.li,{children:(0,s.jsx)(l.code,{children:"loadbalancer_apiserver_type: nginx|haproxy"})}),"\n",(0,s.jsx)(l.li,{children:(0,s.jsx)(l.code,{children:"loadbalancer_apiserver_port: 6443"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(l.h3,{id:"external-lb",children:"External LB"}),"\n",(0,s.jsxs)(l.ul,{children:["\n",(0,s.jsxs)(l.li,{children:["group_vars","\n",(0,s.jsxs)(l.ul,{children:["\n",(0,s.jsxs)(l.li,{children:["all","\n",(0,s.jsxs)(l.ul,{children:["\n",(0,s.jsx)(l.li,{children:(0,s.jsx)(l.code,{children:"loadbalancer_apiserver_localhost: false"})}),"\n",(0,s.jsx)(l.li,{children:(0,s.jsx)(l.code,{children:"apiserver_loadbalancer_domain_name: <domain>"})}),"\n",(0,s.jsx)(l.li,{children:(0,s.jsx)(l.code,{children:"loadbalancer_apiserver.address: <ip>"})}),"\n",(0,s.jsx)(l.li,{children:(0,s.jsx)(l.code,{children:"loadbalancer_apiserver.port: 6443"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:l}={...(0,r.R)(),...e.components};return l?(0,s.jsx)(l,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},28453:(e,l,n)=>{n.d(l,{R:()=>o,x:()=>c});var s=n(96540);const r={},d=s.createContext(r);function o(e){const l=s.useContext(d);return s.useMemo((function(){return"function"==typeof e?e(l):{...l,...e}}),[l,e])}function c(e){let l;return l=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),s.createElement(d.Provider,{value:l},e.children)}}}]);