"use strict";(self.webpackChunkwiki_loliot_net=self.webpackChunkwiki_loliot_net||[]).push([[49026],{54343:(a,n,e)=>{e.r(n),e.d(n,{assets:()=>i,contentTitle:()=>t,default:()=>m,frontMatter:()=>o,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"mlops/mlops/monitoring/grafana/grafana","title":"Grafana","description":"Grafana","source":"@site/docs/mlops/mlops/monitoring/grafana/grafana.mdx","sourceDirName":"mlops/mlops/monitoring/grafana","slug":"/mlops/mlops/monitoring/grafana/","permalink":"/docs/mlops/mlops/monitoring/grafana/","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1731514185000,"frontMatter":{"id":"grafana","title":"Grafana","sidebar_label":"Grafana","description":"Grafana","keywords":["Grafana"]},"sidebar":"mlops","previous":{"title":"Thanos","permalink":"/docs/mlops/mlops/monitoring/prometheus/thanos"},"next":{"title":"Data Source","permalink":"/docs/mlops/mlops/monitoring/grafana/datasource"}}');var l=e(74848),s=e(28453);const o={id:"grafana",title:"Grafana",sidebar_label:"Grafana",description:"Grafana",keywords:["Grafana"]},t=void 0,i={},c=[{value:"\uc124\uce58",id:"\uc124\uce58",level:2},{value:"Keycloak",id:"keycloak",level:2}];function d(a){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...a.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.h2,{id:"\uc124\uce58",children:"\uc124\uce58"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:"helm repo add grafana https://grafana.github.io/helm-charts\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:"helm repo update grafana \\\n&& helm search repo grafana/grafana -l | head -n 10\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:"helm pull grafana/grafana --version 7.3.9\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:"helm show values grafana/grafana --version 7.3.9 > grafana-7.3.9.yaml\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",metastring:'title="grafana-values.yaml"',children:"extraLabels: {}\n\npodLabels: {}\n\nresources:\n  requests:\n    cpu: 200m\n    memory: 1Gi\n  limits:\n    memory: 1Gi\n\ngrafana.ini:\n  # users, data sources, and dashboards \uac19\uc740 \uc124\uc815\uc744 \uc800\uc7a5\ud569\ub2c8\ub2e4.\n  database:\n    type: mysql|postgres|sqlite3\n    host: <host>:<port>\n    name: <database>\n    user: grafana\n    password: <grafana-password>\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:"helm template grafana grafana-7.3.9.tgz \\\n    -n monitoring \\\n    -f grafana-values.yaml \\\n    > grafana.yaml\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:"helm upgrade grafana grafana-7.3.9.tgz \\\n    --install \\\n    --history-max 5 \\\n    -n monitoring \\\n    -f grafana-values.yaml\n"})}),"\n",(0,l.jsx)(n.h2,{id:"keycloak",children:"Keycloak"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"/docs/mlops/mlops/auth/keycloak/openid-connect",children:"Keycloak OIDC"})}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",metastring:'title="grafana-values.yaml"',children:"# https://grafana.com/docs/grafana/latest/setup-grafana/configure-security/configure-authentication/generic-oauth/\ngrafana.ini:\n  server:\n    root_url: <grafana-url>\n  auth.generic_oauth:\n    enabled: true\n    name: Keycloak\n    allow_sign_up: false\n    client_id: grafana\n    client_secret: <grafana-client-secret>\n    scopes: openid profile email groups\n    auth_url: <keycloak-url>/auth/realms/<realm>/protocol/openid-connect/auth\n    token_url: <keycloak-url>/auth/realms/<realm>/protocol/openid-connect/token\n    api_url: <keycloak-url>/auth/realms/<realm>/protocol/openid-connect/userinfo\n    # grafana-admin, grafana-dev \uadf8\ub8f9\n    role_attribute_path: contains(groups[*], 'grafana-admin') && 'Admin' || contains(groups[*], 'grafana-dev') && 'Editor' || 'Viewer'\n  security:\n    disable_initial_admin_creation: true\n"})}),"\n",(0,l.jsx)(n.admonition,{type:"warning",children:(0,l.jsx)(n.p,{children:"\ucd08\uae30\uc5d0 \uc0dd\uc131\ub41c admin \uacc4\uc815\uc740 \uaf2d \uc0ad\uc81c\ud574\uc8fc\uc138\uc694."})})]})}function m(a={}){const{wrapper:n}={...(0,s.R)(),...a.components};return n?(0,l.jsx)(n,{...a,children:(0,l.jsx)(d,{...a})}):d(a)}},28453:(a,n,e)=>{e.d(n,{R:()=>o,x:()=>t});var r=e(96540);const l={},s=r.createContext(l);function o(a){const n=r.useContext(s);return r.useMemo((function(){return"function"==typeof a?a(n):{...n,...a}}),[n,a])}function t(a){let n;return n=a.disableParentContext?"function"==typeof a.components?a.components(l):a.components||l:o(a.components),r.createElement(s.Provider,{value:n},a.children)}}}]);