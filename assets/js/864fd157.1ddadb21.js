"use strict";(self.webpackChunkwiki_loliot_net=self.webpackChunkwiki_loliot_net||[]).push([[306],{10825:(t,e,n)=>{n.r(e),n.d(e,{assets:()=>l,contentTitle:()=>a,default:()=>u,frontMatter:()=>r,metadata:()=>s,toc:()=>c});var o=n(74848),i=n(28453);const r={id:"auth",title:"Auth EnvoyFilter",sidebar_label:"Auth",description:"Auth EnvoyFilter",keywords:["EnvoyFilter","auth"]},a=void 0,s={id:"mlops/mlops/network/istio/traffic-management/envoy-filter/auth",title:"Auth EnvoyFilter",description:"Auth EnvoyFilter",source:"@site/docs/mlops/mlops/network/istio/traffic-management/envoy-filter/auth.mdx",sourceDirName:"mlops/mlops/network/istio/traffic-management/envoy-filter",slug:"/mlops/mlops/network/istio/traffic-management/envoy-filter/auth",permalink:"/docs/mlops/mlops/network/istio/traffic-management/envoy-filter/auth",draft:!1,unlisted:!1,tags:[],version:"current",lastUpdatedAt:1730210406e3,frontMatter:{id:"auth",title:"Auth EnvoyFilter",sidebar_label:"Auth",description:"Auth EnvoyFilter",keywords:["EnvoyFilter","auth"]},sidebar:"mlops",previous:{title:"EnvoyFilter",permalink:"/docs/mlops/mlops/network/istio/traffic-management/envoy-filter/"},next:{title:"Compression",permalink:"/docs/mlops/mlops/network/istio/traffic-management/envoy-filter/compression"}},l={},c=[{value:"http.ext_authz",id:"httpext_authz",level:2}];function p(t){const e={a:"a",code:"code",h2:"h2",li:"li",pre:"pre",ul:"ul",...(0,i.R)(),...t.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e.h2,{id:"httpext_authz",children:"http.ext_authz"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:(0,o.jsx)(e.a,{href:"https://www.envoyproxy.io/docs/envoy/latest/configuration/http/http_filters/ext_authz_filter#config-http-filters-ext-authz",children:"https://www.envoyproxy.io/docs/envoy/latest/configuration/http/http_filters/ext_authz_filter#config-http-filters-ext-authz"})}),"\n",(0,o.jsx)(e.li,{children:(0,o.jsx)(e.a,{href:"https://www.envoyproxy.io/docs/envoy/latest/api-v3/extensions/filters/http/ext_authz/v3/ext_authz.proto",children:"https://www.envoyproxy.io/docs/envoy/latest/api-v3/extensions/filters/http/ext_authz/v3/ext_authz.proto"})}),"\n"]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-yaml",children:'spec:\n  configPatches:\n    - applyTo: HTTP_FILTER\n      match:\n        context: GATEWAY\n        listener:\n          filterChain:\n            filter:\n              name: envoy.filters.network.http_connection_manager\n      patch:\n        operation: INSERT_BEFORE\n        value:\n          name: envoy.filters.http.ext_authz\n          typed_config:\n            "@type": type.googleapis.com/envoy.extensions.filters.http.ext_authz.v3.ExtAuthz\n            # status_on_error:\n            #   code: ServiceUnavailable # \ubb38\uc81c\uac00 \uc0dd\uae30\uba74 503\uc73c\ub85c \uc751\ub2f5\n            http_service:\n              server_uri:\n                uri: http://<service>.<namespace>.svc.cluster.local\n                cluster: outbound|8080||<service>.<namespace>.svc.cluster.local\n                timeout: 10s\n              authorization_request:\n                allowed_headers:\n                  patterns:\n                    - exact: cookie\n                    - exact: authorization\n                    - exact: x-auth-tokeno\n              authorization_response:\n                allowed_upstream_headers:\n                  patterns:\n                    - exact: x-auth-request-email\n                    - exact: authorization\n    - applyTo: HTTP_ROUTE\n      match:\n        routeConfiguration:\n          vhost:\n            name: kubeflow.loliot.net:80\n            route:\n              name: <.VirtualService.spec.http.name> # \ud2b9\uc815\ud55c \uc774\ub984\uc758 \ub77c\uc6b0\ud305\uc5d0 \ub300\ud574 \uc801\uc6a9\n      patch:\n        operation: MERGE\n        value:\n          typed_per_filter_config:\n            envoy.filters.http.ext_authz:\n              "@type": type.googleapis.com/envoy.extensions.filters.http.ext_authz.v3.ExtAuthzPerRoute\n              disabled: true\n'})})]})}function u(t={}){const{wrapper:e}={...(0,i.R)(),...t.components};return e?(0,o.jsx)(e,{...t,children:(0,o.jsx)(p,{...t})}):p(t)}},28453:(t,e,n)=>{n.d(e,{R:()=>a,x:()=>s});var o=n(96540);const i={},r=o.createContext(i);function a(t){const e=o.useContext(r);return o.useMemo((function(){return"function"==typeof t?t(e):{...e,...t}}),[e,t])}function s(t){let e;return e=t.disableParentContext?"function"==typeof t.components?t.components(i):t.components||i:a(t.components),o.createElement(r.Provider,{value:e},t.children)}}}]);