"use strict";(self.webpackChunkwiki_loliot_net=self.webpackChunkwiki_loliot_net||[]).push([[40853],{57094:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>u,contentTitle:()=>l,default:()=>c,frontMatter:()=>o,metadata:()=>a,toc:()=>m});var t=r(74848),s=r(28453);const o={id:"operator",title:"prometheus-operator",sidebar_label:"Operator",description:"prometheus-operator",keywords:["prometheus-operator"]},l=void 0,a={id:"mlops/mlops/monitoring/prometheus/operator",title:"prometheus-operator",description:"prometheus-operator",source:"@site/docs/mlops/mlops/monitoring/prometheus/operator.mdx",sourceDirName:"mlops/mlops/monitoring/prometheus",slug:"/mlops/mlops/monitoring/prometheus/operator",permalink:"/docs/mlops/mlops/monitoring/prometheus/operator",draft:!1,unlisted:!1,tags:[],version:"current",lastUpdatedAt:1730478655e3,frontMatter:{id:"operator",title:"prometheus-operator",sidebar_label:"Operator",description:"prometheus-operator",keywords:["prometheus-operator"]},sidebar:"mlops",previous:{title:"Sink(\ub0b4\ubcf4\ub0b4\uae30)",permalink:"/docs/mlops/mlops/monitoring/collector/vector/sink"},next:{title:"Prometheus",permalink:"/docs/mlops/mlops/monitoring/prometheus/crd/prometheus"}},u={},m=[{value:"Kubernetes \ud638\ud658\uc131",id:"kubernetes-\ud638\ud658\uc131",level:2},{value:"\uc124\uce58",id:"\uc124\uce58",level:2},{value:"\uc0ad\uc81c",id:"\uc0ad\uc81c",level:2}];function i(e){const n={a:"a",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"kubernetes-\ud638\ud658\uc131",children:"Kubernetes \ud638\ud658\uc131"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://github.com/prometheus-operator/kube-prometheus#kubernetes-compatibility-matrix",children:"https://github.com/prometheus-operator/kube-prometheus#kubernetes-compatibility-matrix"})}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"\uc124\uce58",children:"\uc124\uce58"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://github.com/prometheus-community/helm-charts/tree/main/charts/kube-prometheus-stack",children:"kube-prometheus-stack Chart"})}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"helm repo add prometheus-community https://prometheus-community.github.io/helm-charts\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"helm repo update prometheus-community \\\n&& helm search repo prometheus-community/kube-prometheus-stack -l | head -n 10\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"helm pull prometheus-community/kube-prometheus-stack --version 57.0.1\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"helm show values prometheus-community/kube-prometheus-stack \\\n    --version 57.0.1 \\\n    > kube-prometheus-stack-57.0.1.yaml\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",metastring:'title="kube-prometheus-stack-values.yaml"',children:"fullnameOverride: prometheus-stack\n\ncommonLabels: {}\n\ndefaultRules:\n  # Chart\uac00 \uc81c\uacf5\ud558\ub294 \uae30\ubcf8 alert and record rules\uc758 \uc9d1\ud569\n  # https://github.com/prometheus-community/helm-charts/tree/main/charts/kube-prometheus-stack/templates/prometheus/rules-1.14\n  create: false\n\nwindowsMonitoring:\n  enabled: false\n\nalertmanager:\n  enabled: false\n\ngrafana:\n  enabled: false\n\nkubernetesServiceMonitors:\n  enabled: false\n\nkubeApiServer:\n  enabled: false\n\nkubelet:\n  # -kubelet \uc124\uce58, cAdvisor: \uc2e4\ud589\uc911\uc778 \ucee8\ud14c\uc774\ub108\uc758 \uc815\ubcf4\n  enabled: false\n\nkubeControllerManager:\n  enabled: false\n\ncoreDns:\n  enabled: false\n\nkubeDns:\n  enabled: false\n\nkubeEtcd:\n  enabled: false\n\nkubeScheduler:\n  enabled: false\n\nkubeProxy:\n  enabled: false\n\nkubeStateMetrics:\n  enabled: false\n\nnodeExporter:\n  # -node-exporter \uc124\uce58, Node\uc758 Hardware, kernel \uad00\ub828 \uc815\ubcf4\n  enabled: false\n\nprometheusOperator:\n  # -operator \uc124\uce58\n  enabled: true\n  tls:\n    enabled: false\n\n  admissionWebhooks:\n    # PrometheusRules\uc758 \ud615\uc2dd\uc774 \uc62c\ubc14\ub978\uc9c0 \ud655\uc778\ud574\uc8fc\ub294 \uae30\ub2a5\uc778\ub370 control plane\uc774 webhook \uc11c\ube44\uc2a4\uc5d0\n    # \uc811\uadfc\ud560 \uc218 \uc788\uc5b4\uc57c\ud558\ub294 \ubb38\uc81c\uac00 \uc788\uc2b5\ub2c8\ub2e4.\n    enabled: true\n\nprometheus:\n  enabled: false\n\nthanosRuler:\n  enabled: false\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"helm template prometheus-stack kube-prometheus-stack-57.0.1.tgz \\\n    -n monitoring \\\n    -f kube-prometheus-stack-values.yaml \\\n    > kube-prometheus-stack.yaml\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"helm upgrade prometheus-stack kube-prometheus-stack-57.0.1.tgz \\\n    --install \\\n    --history-max 5 \\\n    -n monitoring \\\n    -f kube-prometheus-stack-values.yaml\n"})}),"\n",(0,t.jsx)(n.h2,{id:"\uc0ad\uc81c",children:"\uc0ad\uc81c"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"helm uninstall -n monitoring prometheus-operator\n"})}),"\n",(0,t.jsx)(n.p,{children:"helm\uc73c\ub85c \uc0ad\uc81c\ud55c \ud6c4 CRDs \uc0ad\uc81c\ub97c \uc704\ud574 \uc544\ub798 \uba85\ub839\uc5b4\ub97c \uc2e4\ud589\ud574\uc90d\ub2c8\ub2e4."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"for crd in $(kubectl get crd -o name); do\n    case $crd in\n        *monitoring.coreos.com)\n            kubectl delete $crd\n            ;;\n    esac\ndone\n"})})]})}function c(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(i,{...e})}):i(e)}},28453:(e,n,r)=>{r.d(n,{R:()=>l,x:()=>a});var t=r(96540);const s={},o=t.createContext(s);function l(e){const n=t.useContext(o);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),t.createElement(o.Provider,{value:n},e.children)}}}]);